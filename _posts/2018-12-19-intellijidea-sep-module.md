---
layout: post
title:  Intellij IDEA分离新模块的操作步骤
date:   2018-12-19 15:47:00 +0800
categories: Intellij IDEA
tag: 工具
---

* content
{:toc}

## 前言

随着迭代的演进，在集成化开发环境（IDE）中，我们避免不了代码的重构、合并和分离。而我们的代码往往由VCS来管理着，如何在重构的时候仍然保留VCS的历史轨迹，这对于开发者来说至关重要。多人开发的工程项目是团队协作的结果，每个人在团队中扮演这什么角色，他们做了什么工作，产出是什么，这些都可以从代码的历史轨迹反应出来。

## 善用Refactor功能进行模块分离

在重构的时候，我们按照以下步骤能减少甚至避免“代码历史轨迹断层”的问题。

PS: 假设我们的项目是一个Maven项目。需要根据模块A，分离出一个模块B。原有模块A被模块C所依赖。

PS：移动的时候尽量使用IDEA自带的重构功能，常用如下

1. 右键->Refactor->Move
2. 右键->Refactor->Rename

### 步骤

1. 新建一个模块B
2. 拷贝模块A的依赖到模块B
3. 模块A依赖模块B
4. 将A模块的逻辑代码移动到模块B
5. 将A模块的单元测试代码移动到模块B
6. 模块C依赖模块B
7. 整理模块B的依赖（有可能模块B用不到分离前的模块A的所有依赖）
8. 去掉模块A依赖模块B
9. 对这个root项目进行clean package操作，如有问题，跳至步骤3来fix

步骤4可能出现一些问题，需要先将迁移代码依赖的代码（可能是类、方法、接口）进行重构或者也迁移到模块B，再返回去迁移原有代码。